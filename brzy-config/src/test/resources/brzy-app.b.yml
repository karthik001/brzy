#
# application configuration
#
# http://bill.burkecentral.com/2008/01/14/scanning-java-annotations-at-runtime/
# http://jyaml.sourceforge.net/
application:
  version: 1.0.0
  name: Test app
  author: Fred
  description: Some Description
  group_id: &group org.brzy.sample
  artifact_id: sample-jpa
  application_class: org.brzy.mock.MockWebApp
  properties:
    test: value
  webapp_context: mainapp

#
# dependencies
# scope:organization:name:version
# scope = [provided,runtime,test]
dependencies:
  - lib: compile:org.apache.wicket:wicket:jar:1.4-rc6
  - lib: compile:org.fusesource.scalate:scalate-core:jar:1.0

#
# Dependency Management
repositories:
  - id: fusesource
    url: http://someurl.com/test

plugins:
  - name: scalate
  
persistence:
  - name: "hibernate"
    implementation: "scala-hibernate"
    version: latest
    scan_package: *group
    properties:
      "hibernate.dialect": "org.hibernate.dialect.HSQLDialect"
      "hibernate.connection.url": "jdbc:hsqldb:brzy-database"
      "hibernate.connection.driver_class": "org.hsqldb.jdbcDriver"
      "hibernate.connection.username": "sa"
      "hibernate.connection.password": ""
      "hibernate.hbm2ddl.auto": "update"
  - name: "squeryl"
    implementation: "squeryl"
    version: latest
    scan_package: *group
    properties:
      driver_class: org.postgresql.Driver
      user_name: test
      password:
      url: jdbc:postgresql://localhost/dev

#
# Logging
#[logback,log4j,jul]
logging:
  provider: logback
  appenders:
    - name: STDOUT
      appender_class: ch.qos.logback.core.ConsoleAppender
      layout: ch.qos.logback.classic.encoder.PatternLayoutEncoder
      pattern: "%-4relative [%thread] %-5level %class - %msg%n"
    - name: FILE
      appender_class: ch.qos.logback.core.rolling.RollingFileAppender
      file: logs/brzy.log
      rolling_policy: ch.qos.logback.core.rolling.TimeBasedRollingPolicy
      file_name_pattern: "brzy.%d{yyyy-MM-dd}.log"
      layout: ch.qos.logback.classic.encoder.PatternLayoutEncoder
      pattern: "%-4relative [%thread] %-5level %class - %msg%n"
  loggers:
    - name: org.brzy
      level: debug
  root:
    level: INFO
    ref: FILE

web_xml:
  description: Breezy Scala
  display-name: Breezy Web App
  context-param:
    param-name: brzy-env
    param-value: development
  listener:
    listener-class: org.brzy.application.WebAppListener
  filter:
    filter-name: BrzyFilter
    filter-class: org.brzy.action.Filter
  filter-mapping:
    filter-name: BrzyFilter
    url-pattern: "/*"
  servlet:
    servlet-name: BrzyServlet
    servlet-class: org.brzy.action.Servlet
    load-on-startup: "1"
  servlet-mapping:
    servlet-name: BrzyServlet
    url-pattern: "*.brzy"
  welcome-file-list:
    welcome-file: index.brzy
  error-page:
    error-code: "404"
    location: /error-404.ssp
  error-page:
    error-code: "500"
    location: /error-500.ssp
  error-page:
    exception-type: java.lang.Throwable
    location: /error-500.ssp

#
# override defaults for any environment
#
environment_overrides:
  - environment: developement
    logging:
      root:
        ref:STDOUT
    application:
      webapp_context: devapp
  - environment: test
    application:
      webapp_context: testapp
  - environment: production
    application:
      webapp_context: prodapp



